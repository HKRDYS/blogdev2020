<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.IArticleMapper">
    <resultMap id="articleMap" type="Article">
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="type.id" column="id"/>
        <result property="user.id" column="author_id"/>
        <result property="publishTime" column="publish_time"/>
        <result property="modifyTime" column="modify_time"/>
        <result property="status" column="status"/>
        <result property="enableComment" column="enable_comment"/>
        <result property="img" column="img"/>
    </resultMap>
    <select id="findAllArticles" resultMap="articleMap">
        select a.id as id,
        a.title as title,
        a.content as content,
        t.id as type_id,
        a.author_id as user_id,
        a.publish_time as publish_time,
        a.modify_time as modify_time,
        a.status as satus,
        a.enable_comment as enable_comment,
        a.img as img
        from t_article a,t_user u,t_type t where a.author_id=u.id and a.type_id=t.id
        <if test="id!=null and id!=''">
            and a.id=#{id}
        </if>
        <if test="title!=null and title!=''">
            and a.title=#{title}
        </if>
        <if test="type!=null and type.id!=''">
            and a.type_id=#{type.id}
        </if>
        <if test="user!=null and user.id!=''">
            and a.author_id=#{user.id}
        </if>
        <if test="publishTime!=null">
            and a.publish_time=#{publishTime}
        </if>
        <if test="modifyTime!=null">
            and a.modify_time=#{modifyTime}
        </if>
        <if test="status!=null and status!=''">
            and a.status=#{status}
        </if>
        <if test="enableComment!=null and enableComment!=''">
            and a.enable_comment=#{enableComment}
        </if>
        <if test="img!=null and img!=''">
            and a.img=#{img}
        </if>
    </select>
</mapper>